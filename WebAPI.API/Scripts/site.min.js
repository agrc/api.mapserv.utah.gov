$(document).ready(function(){Modernizr.load([{test:window.JSON,nope:"Scripts/json2.min.js"},{test:!!Array.prototype.indexOf,nope:"Scripts/indexOfShiv.min.js"}]),function(a){a.nano=function(b,c){var d={keys:[],template:""};return d.template=b.replace(/:([\w\.]*)/g,function(b,e){d.keys.push(e);var f=e.split("."),g=c[f.shift()];return a.each(f,function(){g=g[this]}),null===g||void 0===g?"":g}),d}}(jQuery),$("[data-details]").on("click",function(a){$("form",a.target.parentElement).slideToggle("slow",function(){$("body").scrollspy("refresh")})}),$("[data-demo]").on("click",function(a){a.preventDefault(),$(a.target).addClass("disabled");var b=$("[data-codeContainer]",a.target.form)[0],c=$(a.target.form),d=$.attr(a.target,"data-url"),e=!0,f=$.attr(a.target,"data-type")||"GET";if($(b).html(""),$("[data-required]",c).each(function(){$(this.parentElement.parentElement).removeClass("has-error")}),$("[data-required]",c).each(function(){this.value&&""!==$.trim(this.value)||($(this.parentElement.parentElement).addClass("has-error"),$("html, body").animate({scrollTop:$(this).offset().top-200},1e3),this.focus(),e=!1)}),!e)return $(a.target).removeClass("disabled"),!1;$("html, body").animate({scrollTop:$(a.target).offset().top-200},1e3),$(a.target).addClass("progress-bar");var g=new httpStatus(f,c);g.displaySampleUrl(d);var h={type:f,url:g.getUrl(d),data:g.getData(c),dataType:g.getDataType(),timeout:1e4};return $.ajax(h).done(function(c){$(b).html(g.displayResult(c)),$(b).removeClass("hidden"),$(a.target).removeClass("progress-bar disabled")}).fail(function(c){if(c.responseText){var d=JSON.parse(c.responseText);$(b).html(g.displayResult(d))}else $(b).html("Request timed out.");$(b).removeClass("hidden"),$(a.target).removeClass("progress-bar disabled")}),!1}),$("[data-close]").on("click",function(a){var b=$("[data-codeContainer]",a.target.parentElement)[0];$(b).html(""),$("#sampleUrl",a.target.parentElement).html("").hide()})});var httpStatus=function(a,b){this.type=a,this.template={},this._form=b,this._formValues=this._form.serializeArray(),this._postedData={},this._queryStringPairs={},this.getUrl=function(a){var b=this._parseTemplate(a);return this._cleanseFormData(b,this._form),b.template+this._getUrl(this._queryStringPairs)},this._parseTemplate=function(a){var b=this;return $.each(this._formValues,function(){b._queryStringPairs[this.name]=this.value}),$.nano(a,this._queryStringPairs)},this._cleanseFormData=function(a,b){var c=this;return $.each(this._formValues,function(){(a.keys.indexOf(this.name)>-1||!this.value||""==this.value)&&delete c._queryStringPairs[this.name]}),$("[data-json]",b).each(function(){delete c._queryStringPairs[this.name]}),this._queryStringPairs},this._getUrl=function(a){return a.apiKey="AGRC-Dev","?"+$.param(a)},this.getData=function(a){return this._isPost()?this._postData(a):{}},this._postData=function(a){var b=this;return $("[data-json]",a).each(function(){$.extend(b._postedData,JSON.parse(this.value)),$.grep(b._postedData,function(a){return a!=this.name})}),this._postedData},this.getDataType=function(){return $.grep(this._formValues,function(a){return"callback"===a.name&&""!==a.value}).length>0?"text":""},this.displaySampleUrl=function(a){var b=this.getUrl(a),c=window.location.protocol+"//"+window.location.host+b;return $("#sampleUrl",this._form).html(c).show(),c},this.displayResult=function(a){return""===this.getDataType()?JSON.stringify(a,void 0," "):a},this._isPost=function(){return"POST"===this.type}};